# SSH Access Guide (Cloudflare Tunnel)

Use this after the tunnel is running to connect to the VM securely.

## 1) Create Cloudflare Access app (SSH)
In Cloudflare Zero Trust:
- Access → Applications → Add application → Self-hosted
- Domain: `ssh.yourdomain.com`
- Type: SSH
- Add an Access policy (email, group, or GitHub org)

## 2) Connect from your machine
Install `cloudflared` locally, then:
```bash
cloudflared access login https://ssh.yourdomain.com
cloudflared access ssh --hostname ssh.yourdomain.com
```

## 3) Optional: SSH config
```sshconfig
Host my-vm
  HostName ssh.yourdomain.com
  ProxyCommand /usr/local/bin/cloudflared access ssh --hostname %h
  User <vm-user>
```
Then:
```bash
ssh my-vm
```

## 4) Troubleshooting
- If prompted for a browser login every time, re-check your Access session duration.
- If SSH fails, verify `sshd` is running on the VM and the tunnel is connected.
